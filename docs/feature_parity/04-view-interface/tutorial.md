# Tutorial â€“ Feature 3.4 (View & Interface)

This walkthrough shows how to exercise the new layout and theme tooling that powers the RustNotePad UI preview.

## 1. Inspect layout state

```bash
cat assets/layout-preview.json # eventually generated by the GUI
```

- `layout.split_ratio` controls the width of the secondary view (values between `0.1` and `0.9`).
- `panes[].tabs[]` include `is_pinned`, `is_locked`, and optional `color` tags (`blue|green|orange|purple|red`).
- `bottom_dock.visible_panels` declares the order of the Find Results / Console / Notifications / LSP tabs.

Programmatically round-trip a layout configuration:

```rust
use rustnotepad_settings::LayoutConfig;

let layout = LayoutConfig::default();
let json = layout.to_json()?;
let restored = LayoutConfig::from_json(&json)?;
assert_eq!(layout, restored);
```

## 2. Load and switch themes

Theme files live under `assets/themes/*.json`. Create a new theme by copying one of the shipped examples:

```bash
cp assets/themes/midnight_indigo.json assets/themes/my_rust_theme.json
```

Adjust the `palette` colours and `fonts` (sizes expressed in points). The GUI preview picks up new files on restart.

You can also load themes from an arbitrary directory:

```rust
use rustnotepad_settings::ThemeManager;

let mut manager = ThemeManager::load_from_dir("./assets/themes")?;
println!("Available themes: {:?}", manager.theme_names().collect::<Vec<_>>());
manager.set_active_by_name("Nordic Daylight");
let palette = manager.active_palette();
assert_eq!(palette.accent.r, 0x3B);
```

## 3. UI preview interactions

Running the GUI (`cargo run -p rustnotepad_gui`) now provides:

- Theme and UI-language selectors in the toolbar (Backed by `ThemeManager` + status bar state).
- Tab strip with pin/lock markers and colour tags; clicking tabs updates the layout state.
- Split panes (primary editable, secondary preview) with adjustable ratio.
- Bottom dock tabs for Find Results / Console / Notifications / LSP diagnostics.
- Status bar metrics (line/column, selection, encoding, language, theme, UI language).

> **Tip:** To avoid tofu glyphs for Traditional Chinese, drop `NotoSansTC-Regular.otf` (or any CJK-capable font) into `assets/fonts/`. The preview will pick it up on the next launch.

These surfaces will be reused by the production Tauri shell once the core editor and persistence layers are bolted in, so exercising them now validates the new state providers.
